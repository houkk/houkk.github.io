(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{359:function(_,t,l){"use strict";l.r(t);var v=l(25),e=Object(v.a)({},(function(){var _=this,t=_.$createElement,l=_._self._c||t;return l("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[l("div",{staticClass:"custom-block tip"},[l("p",{staticClass:"custom-block-title"},[_._v("TIP")]),_._v(" "),l("ul",[l("li",[_._v("分布式 CDC 服务")]),_._v(" "),l("li",[_._v("生成数据库行级变化事件流的分布式平台")]),_._v(" "),l("li",[_._v("基于 kafka connect")]),_._v(" "),l("li",[_._v("位于 kafka 和 其他数据系统之间的数据工具, 内置 producer 和 consumer 接口, 提供插件模式(供使用者自定义开发 connector、converter等, 将数据导入导出 kafka、格式化等)")])])]),_._v(" "),l("blockquote",[l("p",[_._v("项目很好, 问题修复非常及时\n大体构成: debezium( connector( task))")])]),_._v(" "),l("blockquote",[l("p",[_._v("kafka connect 的 CDC 架构如下")])]),_._v(" "),l("p",[l("img",{attrs:{src:"https://personal-1258258052.cos.ap-shanghai.myqcloud.com/debezium/debezium_arch.png",alt:"基于 kafka connect 的 CDC 流转"}})]),_._v(" "),l("blockquote",[l("p",[_._v("debezium 就是对 kafka connect 进行包装, 并实现了上图读取数据库变更部分\n所以, 建议先了解 "),l("a",{attrs:{href:"https://docs.confluent.io/current/connect/index.html",target:"_blank",rel:"noopener noreferrer"}},[_._v("kafka connect"),l("OutboundLink")],1),_._v(", 默认已有所了解")])]),_._v(" "),l("h2",{attrs:{id:"_1-构成"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_1-构成"}},[_._v("#")]),_._v(" 1. 构成")]),_._v(" "),l("ul",[l("li",[_._v("debezium 集群\n"),l("ul",[l("li",[_._v("没有仔细研究, 内置 leader 选举算法, 不需要过多关注")]),_._v(" "),l("li",[_._v("connector\n"),l("ul",[l("li",[_._v("功能上是 CDC 的功能实现 (debezium 推出了多种数据库的 connector 实现)")]),_._v(" "),l("li",[_._v("架构上是 CDC 任务的管理者")])])]),_._v(" "),l("li",[_._v("task\n"),l("ul",[l("li",[_._v("CDC 的执行者")])])])])]),_._v(" "),l("li",[_._v("kafka 集群\n"),l("ul",[l("li",[_._v("存储 debezium 的一系列信息\n"),l("ul",[l("li",[_._v("config topic: connctor 配置信息")]),_._v(" "),l("li",[_._v("status topic: connector、task 的运行状态")]),_._v(" "),l("li",[_._v("offset topic: cdc 对于数据库的 offset 信息 (比如 mysql binlog 的 pos gtid 等)")])])]),_._v(" "),l("li",[_._v("CDC 数据\n"),l("ul",[l("li",[_._v("内置 kafka 的 sink, 直接落地 kafka, 为后续的操作提供方便")]),_._v(" "),l("li",[_._v("表和 topic 一对一")])])])])])]),_._v(" "),l("h2",{attrs:{id:"_2-功能特点"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_2-功能特点"}},[_._v("#")]),_._v(" 2. 功能特点")]),_._v(" "),l("ul",[l("li",[_._v("保证捕获所有变更\n"),l("ul",[l("li",[_._v("以 binlog row 模式为例, 只要 binlog 不丢, 就可以保证捕获所有变更")])])]),_._v(" "),l("li",[_._v("低延迟")]),_._v(" "),l("li",[_._v("Snapshots\n"),l("ul",[l("li",[_._v("已有数据的 snapshot")]),_._v(" "),l("li",[_._v("个人建议不要理会这个, 感觉这功能放在 CDC 中不太合适")])])]),_._v(" "),l("li",[_._v("Filters\n"),l("ul",[l("li",[_._v("自定义 db table column 的过滤")])])]),_._v(" "),l("li",[_._v("服务性能监控\n"),l("ul",[l("li",[_._v("JMX, 这个没什么好说的")])])]),_._v(" "),l("li",[_._v("消息转换\n"),l("ul",[l("li",[_._v("没了解过啊, 有兴趣的同学可以试试")])])])]),_._v(" "),l("h2",{attrs:{id:"_3-主要原理"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_3-主要原理"}},[_._v("#")]),_._v(" 3. 主要原理")]),_._v(" "),l("blockquote",[l("p",[_._v("简单的介绍一下 debezium 的 CDC 是怎么做的:\n基于数据库本身的逻辑记录和备份机制来实现的")])]),_._v(" "),l("p",[_._v("举几个例子")]),_._v(" "),l("ul",[l("li",[_._v("Mysql\n"),l("ul",[l("li",[_._v("binlog(row)")])])]),_._v(" "),l("li",[_._v("pg\n"),l("ul",[l("li",[_._v("wal(logic)")]),_._v(" "),l("li",[_._v("Replication Slot")])])]),_._v(" "),l("li",[_._v("mongodb\n"),l("ul",[l("li",[_._v("oplog")])])])]),_._v(" "),l("blockquote",[l("p",[_._v("所以, 就是逻辑重放")])]),_._v(" "),l("h2",{attrs:{id:"_4-数据库支持"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_4-数据库支持"}},[_._v("#")]),_._v(" 4. 数据库支持")]),_._v(" "),l("blockquote",[l("p",[_._v("提供了多种数据库的支持")])]),_._v(" "),l("ul",[l("li",[_._v("Mysql")]),_._v(" "),l("li",[_._v("MongoDB")]),_._v(" "),l("li",[_._v("PostgreSql")]),_._v(" "),l("li",[_._v("Oracle")]),_._v(" "),l("li",[_._v("Sql Server")]),_._v(" "),l("li",[_._v("Db2")]),_._v(" "),l("li",[_._v("Cassandra")])]),_._v(" "),l("h2",{attrs:{id:"_5-demo"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_5-demo"}},[_._v("#")]),_._v(" 5. Demo")]),_._v(" "),l("p",[l("a",{attrs:{href:"https://debezium.io/documentation/reference/1.1/tutorial.html",target:"_blank",rel:"noopener noreferrer"}},[_._v("Debezium 官网"),l("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);